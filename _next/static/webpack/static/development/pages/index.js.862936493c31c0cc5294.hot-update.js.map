{"version":3,"file":"static/webpack/static/development/pages/index.js.862936493c31c0cc5294.hot-update.js","sources":["webpack:///./pages/index.js"],"sourcesContent":["import _ from \"lodash\";\nimport React from \"react\";\nimport axios from \"axios\";\nimport styled from \"styled-components\";\nimport Link from \"next/link\";\nimport Head from \"../components/Head\";\nimport Rank from \"../components/Rank\";\nimport RankSunburst from \"../components/RankSunburst\";\n\nconst Topbar = styled.div`\n  height: 20px;\n`;\n\nconst Title = styled.div`\n  font-size: 1.5em;\n  padding: 3px 10px 3px 10px;\n  background: #ffffff;\n  display: inline-block;\n  border-radius: 3px;\n`;\n\nconst Document = styled.div`\n  background-image: url(\"./static/background.jpg\");\n  background-size: cover;\n  background-position: center center;\n  height: 100vh;\n`;\n\nconst Mask = styled.div`\n  width: 100%;\n  height: 100%;\n  background-color: rgba(10, 10, 10, 0.6);\n`;\n\nconst Container = styled.div`\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n  position: relative;\n`;\n\nconst Main = styled.div`\n  position: absolute;\n  top: 80px;\n  left: 0;\n  width: 50%;\n  height: calc(100% - 80px);\n  display: flex;\n  flex-direction: column;\n  align-items: flex-start;\n  justify-content: center;\n`;\n\nconst RankPanel = styled(Rank)`\n  margin-right: 0;\n`;\n\nconst GithubButton = styled.a`\n  color: #ffffff;\n  padding: 5px 0;\n  display: block;\n  &:hover {\n    color: #ffffff;\n  }\n`;\n\nexport default class Home extends React.PureComponent {\n  state = {\n    data: null,\n  };\n\n  componentDidMount() {\n    this.loadData();\n  }\n\n  async loadData() {\n    const res = await axios.get(\"./static/data.json\");\n    const raw = await res.data;\n    const fields = _.pullAt(raw, [0])[0];\n    const data = _.map(raw, item => _.mapKeys(item, (__, key) => fields[key]));\n    this.setState({ data });\n  }\n\n  renderSunburst() {\n    const { data } = this.state;\n    if (!data) return null;\n\n    return <RankSunburst data={data} />;\n  }\n\n  renderRank() {\n    const { data } = this.state;\n    if (!data) return null;\n\n    return <RankPanel data={data} />;\n  }\n\n  render() {\n    return (\n      <Document>\n        <Head title=\"資料申請小幫手\" />\n        <Mask>\n          <Container className=\"container\">\n            <Topbar />\n            <div>\n              <Title>資料申請小幫手</Title>\n              <GithubButton\n                target=\"_blank\"\n                href=\"https://github.com/opengovdatatw/dataopener\"\n              >\n                View on GitHub\n              </GithubButton>\n            </div>\n            {this.renderRank()}\n            <Main>\n              <Link href=\"list\">\n                <button type=\"button\" className=\"btn btn-primary\">\n                  立即檢索申請狀況\n                </button>\n                </Link>\n            </Main>\n          </Container>\n        </Mask>\n      </Document>\n    );\n  }\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AACA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AACA;;;AACA;AAAA;AAAA;AAAA;AACA;AAGA;AAAA;AAAA;AAAA;AACA;AAOA;AAAA;AAAA;AAAA;AACA;AAMA;AAAA;AAAA;AAAA;AACA;AAKA;AAAA;AAAA;AAAA;AACA;AAMA;AAAA;AAAA;AAAA;AACA;AAWA;AAAA;AAAA;AAAA;AACA;AAGA;AAAA;AAAA;AAAA;AACA;AAQA;;;;;;;;;;;;;;;;;AACA;AACA;AADA;;;;;;AAIA;AACA;AACA;;;;;;;;;;;;;AAGA;AACA;;AADA;;AACA;AACA;;AADA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;;;;;;;;;;;;;;;;;AAEA;AAAA;AAEA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;;;AAEA;AAAA;AAEA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;;;AAEA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AAFA;AAAA;AAAA;AAAA;AAAA;AAAA;AAQA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AASA;;;AA3DA;AACA;;;;;A","sourceRoot":""}